{"version":3,"sources":["minimax.js"],"names":[],"mappings":"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","file":"public/minimax.js","sourcesContent":["// JavaScript Document\n\nvar chessB = new Image();\nvar chessW = new Image();\nvar chessG = new Image();\n\nchessB.src=\"images/blackChess.png\";\nchessW.src=\"images/whiteChess.png\";\nchessG.src=\"images/greenChess.png\";\n\nvar empty=0;\nvar black=1;\nvar white=2;\nvar legal=3;\nvar bound=4;\nvar depth=100;\n\nvar AIcolor;\nvar Usercolor;\nvar turn=false; //黑白棋要確認當前是哪方，不像五子棋是兩方交替那麼簡單\n\n\nvar testBoard=[\nbound,bound,bound,bound,bound,bound,bound,bound,bound,bound,\nbound,empty,empty,empty,empty,empty,empty,empty,empty,bound,\nbound,empty,empty,empty,empty,empty,empty,empty,empty,bound,\nbound,empty,empty,empty,empty,empty,empty,empty,empty,bound,\nbound,empty,empty,empty,white,black,empty,empty,empty,bound,\nbound,empty,empty,empty,black,white,empty,empty,empty,bound,\nbound,empty,empty,empty,empty,empty,empty,empty,empty,bound,\nbound,empty,empty,empty,empty,empty,empty,empty,empty,bound,\nbound,empty,empty,empty,empty,empty,empty,empty,empty,bound,\nbound,bound,bound,bound,bound,bound,bound,bound,bound,bound\n];\n\n\nvar scoreBoard=[\n\n 90, -60,10,10,10,10,-60, 90,\n-60, -80, 5, 5, 5, 5,-80,-60,\n 10,   5, 1, 1, 1, 1,  5, 10,\n 10,   5, 1, 1, 1, 1,  5, 10,\n 10,   5, 1, 1, 1, 1,  5, 10,\n 10,   5, 1, 1, 1, 1,  5, 10,\n-60, -80, 5, 5, 5, 5,-80,-60,\n 90, -60,10,10,10,10,-60, 90\n\n];\n\n\nvar direction = [1,-1,9,-9,10,-10,11,-11];\n\nfunction drawBoard(){\n  canvas=document.getElementById(\"canvas\");\n  context=canvas.getContext(\"2d\");\n  for(var count=0;count <= 320; count+=40){\n    context.beginPath();\n    context.moveTo(0,count);\n    context.lineTo(320,count);\n    context.closePath();\n    context.stroke();\n\n    context.beginPath();\n    context.moveTo(count,0);\n    context.lineTo(count,320);\n    context.closePath();\n    context.stroke();\n\n  }\n\n}\n\nfunction touchBoard(pos){\n  var x = parseInt((pos.clientX)/40);\n  var y = parseInt((pos.clientY)/40);\n  var position=10*y+x+11;\n  if(noLegal(2,1) && noLegal(1,2)){\n    turn =false;\n    alert(\"Game is end.\");\n  }else{\n  if(turn){\n    if(isLegal(2,1,position)){\n      touchMove(2,1,position,testBoard);\n      renewState();\n      turn=false;\n      play();\n    }else{\n      alert(\"It is not legal position.\");\n    }\n  }else{\n    alert(\"It is not your turn\");\n  }\n  }\n}\n\nfunction drawChess(color,x,y){\n\n  if(color==1){\n    context.drawImage(chessB,x*40,y*40);\n  }else if(color==2){\n    context.drawImage(chessW,x*40,y*40);\n  }else if(color==3){\n    context.drawImage(chessG,x*40,y*40);\n  }\n\n}\n\nfunction renewState(){\n    context.clearRect(0,0,320,320);\n  drawBoard();\n  for(var i=11;i<89;i++){\n    if(testBoard[i]!=empty){\n        var x=i%10-1;\n      var y=Math.floor(i/10)-1;\n      drawChess(testBoard[i],x,y);\n    }\n  }\n}\n\n\n\nfunction initialState(){\n  for(var i=11;i<89;i++){\n    if(testBoard[i]!=empty){\n        var x=i%10-1;\n      var y=Math.floor(i/10)-1;\n      drawChess(testBoard[i],x,y);\n    }\n  }\n  play();\n\n}\n\nfunction findLegal(){\n  var legal_pos=new Array(1);\n  var count=0;\n  legal_pos[0]=count;\n\n  for(var i=11;i<89;i++){\n    if(testBoard[i]==empty && isLegal(1,2,i)){\n\n       legal_pos.splice(legal_pos.length ,0 ,i);\n       count++;\n       legal_pos[0]=count;\n    }\n    //alert(i);\n  }\n\n  return legal_pos;\n\n}\n\nfunction isLegal(test_color,opp_color,pos){\n  var scan;\n  if(testBoard[pos]==empty){\n  for(var i=0;i<8;i++){\n        scan=pos;  //這很重要\n      scan+=direction[i];\n      if(testBoard[scan]==opp_color){\n        scan+=direction[i];\n        while(testBoard[scan]==opp_color)scan+=direction[i];\n        if(testBoard[scan]==test_color){\n           var x=pos%10-1;\n               var y=Math.floor(pos/10)-1;\n               //drawChess(legal,x,y);\n\n           return true;\n\n        }\n      }\n  }\n  return false;\n  }\n\n}\n\n\nfunction noLegal(test_color,opp_color){\n  for(var i=11;i<89;i++){\n    if(testBoard[i]==empty && isLegal(test_color,opp_color,i)){\n      return false;\n    }\n  }\n  return true;\n}\n\n\nfunction touchMove(test_color,opp_color,pos,board){\n    var scan;\n\n  for(var i=0;i<8;i++){\n        scan=pos;  //這很重要\n      scan+=direction[i];\n      if(board[scan]==opp_color){\n        scan+=direction[i];\n        while(board[scan]==opp_color)scan+=direction[i];\n        if(board[scan]==test_color){\n          board[pos]=test_color; //空的那格\n          for(var c=pos+direction[i];c!=scan;c+=direction[i]){\n            board[c]=test_color;\n\n          }\n        }\n      }\n  }\n\n}\n\n\nfunction play(){\n  var legal_pos;\n  var count;\n  var pos;\n\n    if(noLegal(2,1) && noLegal(1,2)){\n    alert(\"Game is end.\");\n  }else{\n    if(!turn){\n      pos=moveWithMinmax();\n      touchMove(1,2,pos,testBoard);\n        renewState();\n    }\n      turn = true;\n  //判斷二者皆沒得下了，結束\n  }\n\n}\n\nfunction evaluate(color,board){\n  var count_score;\n  var legal_pos;\n\n  var mobility;\n  var boardS=0;\n\n  var m_weight=7;\n  var b_weight=4;\n\n  legal_pos=findLegal();\n\n\n  mobility=legal_pos[0];\n\n  for(i=11;i<89;i++){\n    if(board[i]==color){\n      boardS+=scoreBoard[i-11];\n    }\n  }\n\n  count_score=m_weight*mobility+b_weight*boardS;\n  return count_score;\n\n\n}\n\n\nfunction minmax(turn,depth,alpha,beta,board){\n\n  var score;\n  //alert(\"ISSS>\"+depth);\n  var c_board = board.slice();\n\n  if(depth==0){\n    //alert(\"button\");\n    return evaluate(1,c_board);\n\n  }\n\n\n  if(!turn){\n    var value=-9999;\n    for(i=11;i<89;i++){\n      if(isLegal(1,2,i)){\n\n        touchMove(1,2,i,c_board);\n        score=minmax(true,depth-1,alpha,beta,c_board);\n        //alert(score);\n        if(score>value){\n          value=score;\n          //alert(\"YES\"+score);\n        }\n\n        alpha=Math.max(alpha,score);\n        //alert(\"Alpha\"+alpha);\n        if(alpha>=beta){\n          //包含等號因為一樣的出去沒超過既有的value也無法取代，所以乾脆砍了\n          break;\n        }\n\n      }\n    }\n  }\n  if(turn){\n    var value=9999\n    for(i=11;i<89;i++){\n      if(isLegal(2,1,i)){\n        touchMove(2,1,i,c_board);\n        score=minmax(false,depth-1,alpha,beta,c_board);\n        //alert(\"White\");\n        if(score<value){\n          value=score;\n        }\n\n        alpha=Math.min(beta,score);\n        if(alpha<=beta){\n          //包含等號因為一樣的出去沒超過既有的value也無法取代，所以乾脆砍了\n          break;\n        }\n\n      }\n    }\n  }\n  //alert(\"value is \"+value);\n  return value;\n}\n\n\nfunction moveWithMinmax(){\n  var value=-9999;\n  var score;\n  var pos;\n\n  for(var i=11;i<89;i++){\n\n      if(isLegal(1,2,i)){\n\n      score=minmax(false,depth,-9999,9999,testBoard);\n      //alert(\"SSSS\"+score);\n      if(score>value){\n        value=score;\n        pos=i;\n      }\n      }\n  }\n  return pos;\n}\n\n"]}