!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var r={},t={},n={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,o=function(e,r){for(var t,n=[],i=(a.test(r)?e+"/"+r:r).split("/"),o=0,s=i.length;s>o;o++)t=i[o],".."===t?n.pop():"."!==t&&""!==t&&n.push(t);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(r){return function(t){var n=o(s(r),t);return e.require(n,r)}},l=function(e,r){var n=null;n=y&&y.createHot(e);var i={id:e,exports:{},hot:n};return t[e]=i,r(i.exports,u(e),i),i.exports},c=function(e){return n[e]?c(n[e]):e},f=function(e,r){return c(o(s(e),r))},d=function(e,n){null==n&&(n="/");var a=c(e);if(i.call(t,a))return t[a].exports;if(i.call(r,a))return l(a,r[a]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};d.alias=function(e,r){n[r]=e};var h=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,b=function(e){if(h.test(e)){var r=e.replace(h,"");i.call(n,r)&&n[r].replace(h,"")!==r+"/index"||(n[r]=e)}if(p.test(e)){var t=e.replace(p,"");i.call(n,t)||(n[t]=e)}};d.register=d.define=function(e,n){if("object"==typeof e)for(var a in e)i.call(e,a)&&d.register(a,e[a]);else r[e]=n,delete t[e],b(e)},d.list=function(){var e=[];for(var t in r)i.call(r,t)&&e.push(t);return e};var y=e._hmr&&new e._hmr(f,d,r,t);d._cache=t,d.hmr=y&&y.wrap,d.brunch=!0,e.require=d}}(),function(){window;require.register("fs",function(e,r,t){t.exports={}}),require.register("child_process",function(e,r,t){t.exports={}});var e;require.register("src/DrawBoard.js",function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(){window.board=new h["default"],window.playerBlack=new p.MctsPlayer(d.B),window.playerWhite=null;for(var e=0;2>e;e++)v[e].onload=function(){w++,2==w&&(s(),o())}}function a(){i()}function o(){var e=window.document.getElementById("canvas"),r=e.getContext("2d");r.fillStyle="#E4AC6A",r.fillRect(0,0,e.width,e.height);for(var t=0;320>=t;t+=40)r.beginPath(),r.moveTo(0,t),r.lineTo(320,t),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(t,0),r.lineTo(t,320),r.closePath(),r.stroke();for(var n=window.board.getBoardData(),i=0;8>i;i++)for(var a=0;8>a;a++)null!=n[i+8*a]&&f(r,i,a,n[i+8*a])}function s(){var e=window.board.getTurn();if(console.log("checkMove"),e==d.B){if(null!=playerBlack){var r=window.playerBlack.getMove(window.board);window.board.placePiece(d.B,r[0],r[1])}}else if(e==d.W){if(null!=playerWhite){var r=window.playerWhite.getMove(window.board);window.board.placePiece(d.W,r[0],r[1])}}else u()}function u(){console.log("OVERRRRR")}function l(e){var r=c(e),t=parseInt(r.x/40),n=parseInt(r.y/40);console.log(t+", "+n),window.board.isValidPosition(t,n)&&window.board.placePiece(window.board.getTurn(),t,n),o(),s(),o()}function c(e){var r=window.document.getElementById("canvas"),t=r.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return{x:n,y:i}}function f(e,r,t,n){n==d.B?e.drawImage(b,40*r+1.5,40*t+1.5):e.drawImage(y,40*r+1.5,40*t+1.5)}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=i,e.reset=a,e.drawBoard=o,e.checkMove=s,e.touchBoard=l,e.drawChess=f;var d=r("./ReversiBoard"),h=n(d),p=r("./player"),b=new Image,y=new Image;b.src="images/blackChess.png",y.src="images/whiteChess.png";var v=[b,y],w=0}),require.register("src/Game.js",function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=r("./ReversiBoard"),s=n(o),u=r("./player"),l=function(){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this.playerBlack="undefined"==typeof r.black?new u.RandomPlay(o.B):new r.black(o.B),this.playerWhite="undefined"==typeof r.white?new u.MctsPlayer(o.W):new r.white(o.W),this.board=new s["default"]}return a(e,[{key:"start",value:function(){for(;null!=this.board.getTurn();){switch(this.board.getTurn()){case o.W:var e=this.playerWhite.getMove(this.board);this.board.placePiece(o.W,e[0],e[1]);break;case o.B:var e=this.playerBlack.getMove(this.board);this.board.placePiece(o.B,e[0],e[1])}this.board.logBoard()}console.log("W: "+this.board.getScore(o.W)+", B: "+this.board.getScore(o.B))}},{key:"reset",value:function(){this.board=new s["default"]}}]),e}();e["default"]=l}),require.register("src/ReversiBoard.js",function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),a=e.W=1,o=e.B=2,s=e.InvalidMoveError=function l(){n(this,l)},u=function(){function e(){n(this,e),this._boardData=new Array(64).fill(null),this._boardData[27]=a,this._boardData[28]=o,this._boardData[35]=o,this._boardData[36]=a,this._turn=o,this._clearCache()}return i(e,[{key:"getBoardData",value:function(){return this._boardData}},{key:"getPosition",value:function(e,r){return this._boardData[e+8*r]}},{key:"getTurn",value:function(){return 0==this.getValidPositions().length&&(this._turn==o?this._turn=a:this._turn==a&&(this._turn=o),0==this.getValidPositions().length&&(this._turn=null)),this._turn}},{key:"flippedPositionsFor",value:function(e,r){if("array"==typeof this._flippedPositionsCache[""+e+r])return this._flippedPositionsCache[""+e+r];var t=[],n=this.getBoardData();if(null!=n[e+8*r]);else for(var i=0;8>i;i++)for(var a=0;8>a;a++)this.willPositionFlip(i,a,e,r)&&t.push([i,a]);return this._flippedPositionsCache[""+e+r]=t,t}},{key:"willPositionFlip",value:function(e,r,t,n){var i=this.getBoardData();if(null!=i[t+8*n])return!1;if("array"==typeof this._flippedPositionsDataCache[""+t+n])return this._flippedPositionsDataCache[""+t+n][e+8*r];for(var s=this._turn,u=new Array(64).fill(!1),l=-1;1>=l;l++)for(var c=-1;1>=c;c++)if(0!=l||0!=c)for(var f=[],d=1;;){var h=t+l*d,p=n+c*d,b=i[h+8*p];if(0>h||0>p||h>=8||p>=8)break;if(b!=o&&b!=a)break;if(b!=s)f.push([h,p]);else if(b==s){f.forEach(function(e){u[e[0]+8*e[1]]=!0});break}d++}return this._flippedPositionsDataCache[""+t+n]=u,u[e+8*r]}},{key:"getValidPositions",value:function(){if("array"==typeof this._validPositionsCache)return this._validPositionsCache;for(var e=[],r=0;8>r;r++)for(var t=0;8>t;t++)this.isValidPosition(r,t)&&e.push([r,t]);return this._validPositionsCache=e,e}},{key:"isValidPosition",value:function(e,r){return this.flippedPositionsFor(e,r).length>0}},{key:"getScore",value:function(e){if("undefined"!=typeof this._scoreCache[e])return this._scoreCache[e];for(var r=0,t=0;64>t;t++)this._boardData[t]==e&&r++;return this._scoreCache[e]=r,r}},{key:"placePiece",value:function(e,r,t){var n=this;if(e!=this.getTurn())throw new s;if(!this.isValidPosition(r,t))throw new s;var i=this.flippedPositionsFor(r,t);return this._boardData[r+8*t]=e,i.forEach(function(r){n._boardData[r[0]+8*r[1]]=e}),e==a?this._turn=o:e==o&&(this._turn=a),this._clearCache(),this}},{key:"setBoardDataForTesting",value:function(e){this._boardData=e,this._clearCache()}},{key:"setTurnForTesting",value:function(e){this._turn=e,this._clearCache()}},{key:"setBoardData",value:function(e,r){return this._boardData=e,this._turn=r,this._clearCache(),this}},{key:"getWinner",value:function(){var r=this.getScore(o),t=this.getScore(a);if(this.isFull())return r>t?o:a;var n=(new e).setBoardData(this._boardData,o);if(n.length>0)return!1;var i=(new e).setBoardData(this._boardData,a);return i.length>0?!1:r>t?o:a}},{key:"isFull",value:function(){for(var e=0;e<this._boardData.length;e++)if(null==this._boardData[e])return!1;return!0}},{key:"_clearCache",value:function(){this._flippedPositionsDataCache={},this._flippedPositionsCache={},this._validPositionsCache=void 0,this._scoreCache={}}},{key:"logBoard",value:function(){var e=function(e){return null==e?" ":e==o?"X":e==a?"O":void 0},r=this._boardData;console.log("  0 1 2 3 4 5 6 7");for(var t=0;8>t;t++){for(var n=[t],i=0;8>i;i++)n.push(e(r[8*t+i]));console.log(n.join(" "))}}}]),e}();e["default"]=u}),require.register("src/player/BasePlayer.js",function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),a=function(){function e(r){n(this,e),this.color=r}return i(e,[{key:"getMove",value:function(){throw"Method Not Implemented"}}]),e}();e["default"]=a}),require.register("src/player/HumanPlay.js",function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function o(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),u=r("./BasePlayer"),l=n(u),c=r("readline-sync"),f=n(c),d=function(e){function r(){return i(this,r),a(this,Object.getPrototypeOf(r).apply(this,arguments))}return o(r,e),s(r,[{key:"getMove",value:function(e){var r=f["default"].question("Enter position(x,y): "),t=r.trim().split(",");return t.map(function(e){return parseInt(e)})}}]),r}(l["default"]);e["default"]=d}),require.register("src/player/MctsPlayer.js",function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function s(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),l=r("./BasePlayer"),c=n(l),f=r("./mcts/Node"),d=n(f),h=r("../ReversiBoard"),p=n(h);r("../utils");var b=function(e){function r(){return a(this,r),o(this,Object.getPrototypeOf(r).apply(this,arguments))}return s(r,e),u(r,[{key:"getMove",value:function(e){var r=this.boardFromState(e.getBoardData(),e._turn),t=this.monteCarloTreeSearch(r);return t}},{key:"monteCarloTreeSearch",value:function(e){for(var r=new d["default"](e),t=0,n=(new Date).getTime();(new Date).getTime()-n<3e3;){var i=this.treePolicy(r),a=this.simulate(i.gameState);this.backPropogation(i,a),t+=1}for(var o in r.children)var s=r.children[o].getWinsPlays(),u=s.wins,l=s.plays,c=r.children[o].move;return this.bestAction(r)}},{key:"bestAction",value:function(e){var r=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,n=[];for(var a in e.children){var o=e.children[a].getWinsPlays(),s=o.wins,u=o.plays;u>r?(r=u,n=[e.children[a].move]):u==r&&(s>t?(t=s,n=[e.children[a].move]):s==t&&(n=[].concat(i(n),[e.children[a].move])))}return n[this.randomPick(0,n.length-1)]}},{key:"backPropogation",value:function(e,r){for(;null!=e.parent;)e.plays+=1,e.wins+=r,e=e.parent;e.plays+=1,e.wins+=r}},{key:"treePolicy",value:function(e){for(var r=e;;){var t=this.boardFromState(r.gameState.boardData,r.gameState.turn).getValidPositions();if(0!=t.length){if(r.children.length<t.length){var n=t.filter(function(e){return!r.hasVisited(e)}),i=n[this.randomPick(0,n.length-1)],a=this.boardFromState(r.gameState.boardData,r.gameState.turn).placePiece(r.gameState.turn,i[0],i[1]),o=new d["default"](a,i);return r.addChild(o),o}r=this.bestChild(r)}else{if(this.boardFromState(r.gameState.boardData,r.gameState.turn).getWinner())return r;var s=new d["default"](this.boardFromState(r.gameState.boardData,opponent(r.gameState.turn)));r.addChild(s),r=s}}return r}},{key:"bestChild",value:function(e){var r=1,t={node:null,value:Number.NEGATIVE_INFINITY};for(var n in e.children){var i=e.children[n].getWinsPlays(),a=i.wins,o=i.plays,s=e.getWinsPlays(),u=s.plays,l=a/o+r*Math.sqrt(2*Math.log(u)/o);l>t.value&&(t.node=e.children[n],t.value=l)}return t.node}},{key:"simulate",value:function(e){for(var r=1,t=0,n=Object.assign({},e);;){var i=this.boardFromState(n.boardData,n.turn),a=i.getWinner();if(a)return a==this.color?r:t;var o=i.getValidPositions();0==o.length&&(n=Object.assign({},n,{turn:opponent(n.turn)}),o=this.boardFromState(n.boardData,n.turn).getValidPositions());var s=o[this.randomPick(0,o.length-1)],u=this.boardFromState(n.boardData,n.turn).placePiece(n.turn,s[0],s[1]);n={boardData:u.getBoardData(),turn:u._turn}}}},{key:"randomPick",value:function(e,r){return Math.floor(Math.random()*(r-e+1)+e)}},{key:"boardFromState",value:function(e,r){return(new p["default"]).setBoardData([].concat(i(e)),r)}}]),r}(c["default"]);e["default"]=b}),require.register("src/player/RandomPlay.js",function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function o(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),u=r("./BasePlayer"),l=n(u),c=function(e){function r(){return i(this,r),a(this,Object.getPrototypeOf(r).apply(this,arguments))}return o(r,e),s(r,[{key:"getMove",value:function(e){var r=e.getValidPositions();return r[this.randomPick(0,r.length-1)]}},{key:"randomPick",value:function(e,r){return Math.floor(Math.random()*(r-e+1)+e)}}]),r}(l["default"]);e["default"]=c}),require.register("src/player/index.js",function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=r("./RandomPlay"),a=n(i),o=r("./MctsPlayer"),s=n(o);t.exports={RandomPlay:a["default"],MctsPlayer:s["default"]}}),require.register("src/player/mcts/Node.js",function(e,r,t){"use strict";function n(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(){function e(r){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];i(this,e),this.gameState={boardData:r.getBoardData(),turn:r.getTurn()},this.plays=0,this.wins=0,this.children=[],this.parent=null,this.movesExpanded=new Set,this.move=t}return a(e,[{key:"addChild",value:function(e){return this.children=[].concat(n(this.children),[e]),this.movesExpanded.add(e.move),e.parent=this,this}},{key:"hasVisited",value:function(e){return this.movesExpanded.has(e)}},{key:"hasChildren",value:function(){return this.children.length>0}},{key:"getWinsPlays",value:function(){return{wins:this.wins,plays:this.plays}}}]),e}();e["default"]=o}),require.register("src/utils/index.js",function(e,r,t){"use strict";function n(e){return e==i.B?i.W:i.B}Object.defineProperty(e,"__esModule",{value:!0}),e.opponent=n;var i=r("../ReversiBoard")}),require.alias("vm-browserify/index.js","vm"),require.alias("ripemd160/lib/ripemd160.js","ripemd160"),require.alias("create-hmac/browser.js","create-hmac"),require.alias("browserify-cipher/browser.js","browserify-cipher"),require.alias("create-hash/browser.js","create-hash"),require.alias("diffie-hellman/browser.js","diffie-hellman"),require.alias("pbkdf2/browser.js","pbkdf2"),require.alias("elliptic/lib/elliptic.js","elliptic"),require.alias("util-deprecate/browser.js","util-deprecate"),require.alias("os-browserify/browser.js","os"),require.alias("readable-stream/readable.js","readable-stream"),require.alias("stream-browserify/index.js","stream"),require.alias("browserify-sign/browser.js","browserify-sign"),require.alias("buffer/index.js","buffer"),require.alias("string_decoder/index.js","string_decoder"),require.alias("bn.js/lib/bn.js","bn.js"),require.alias("readline-sync/lib/readline-sync.js","readline-sync"),require.alias("des.js/lib/des.js","des.js"),require.alias("public-encrypt/browser.js","public-encrypt"),require.alias("core-util-is/lib/util.js","core-util-is"),require.alias("path-browserify/index.js","path"),require.alias("crypto-browserify/index.js","crypto"),require.alias("os-browserify/browser.js","os-browserify"),require.alias("process/browser.js","process"),require.alias("hash.js/lib/hash.js","hash.js"),require.alias("browserify-aes/browser.js","browserify-aes"),require.alias("randombytes/browser.js","randombytes"),require.alias("miller-rabin/lib/mr.js","miller-rabin"),require.alias("inherits/inherits_browser.js","inherits"),require.alias("events/events.js","events"),require.alias("create-ecdh/browser.js","create-ecdh"),require.alias("asn1.js/lib/asn1.js","asn1.js"),require.alias("jquery/dist/jquery.js","jquery"),require.alias("base64-js/lib/b64.js","base64-js"),e=require("process"),require.register("___globals___",function(e,r,t){window.$=r("jquery")})}(),require("___globals___");